parameters:
  owarch:   $(owarch)
  owpath:   ''
  owprefix: ''
  owcond:   true

steps:
    - task: ArchiveFiles@2
      displayName: Create Artifact Archive ${{ parameters.owprefix }}-${{ parameters.owarch }}
      inputs:
        rootFolderOrFile: ${{ parameters.owpath }}
        includeRootFolder: false
        archiveType: 'tar'
        archiveFile: $(Pipeline.Workspace)/$(owartifactfile)
        replaceExistingArchive: true
      condition: ${{ parameters.owcond }}
    - task: PublishPipelineArtifact@1
      displayName: Save Archive ${{ parameters.owprefix }}-${{ parameters.owarch }}
      inputs: 
        artifactName: ${{ parameters.owprefix }}-${{ parameters.owarch }}
        targetPath: $(Pipeline.Workspace)/$(owartifactfile)
      condition: ${{ parameters.owcond }}
    - bash: rm -f $(Pipeline.Workspace)/$(owartifactfile)
      displayName: Remove Archive
      condition: ${{ parameters.owcond }}
