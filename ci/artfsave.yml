parameters:
  owpath:   ''
  owprefix: ''
  owcond:   true

steps:
    - template: archives.yml
      parameters: 
        owfilepath: ${{ parameters.owpath }}
        owtitle: Create Artifact Archive ${{ parameters.owprefix }}-$(owarch)
        owcond: ${{ parameters.owcond }}
    - task: PublishPipelineArtifact@1
      displayName: Save Archive ${{ parameters.owprefix }}-$(owarch)
      inputs: 
        artifactName: ${{ parameters.owprefix }}-$(owarch)
        targetPath: $(Pipeline.Workspace)/$(owartifactfile)
      condition: ${{ parameters.owcond }}
    - bash: rm -f $(Pipeline.Workspace)/$(owartifactfile)
      displayName: Remove Archive
      condition: ${{ parameters.owcond }}
